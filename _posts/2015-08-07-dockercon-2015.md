---
layout: post
title: Dockercon 2015
---

This is a late write up on the Dockercon 2015 which I attended in June this year. If you are not already aware 
Dockercon is a two-day conference organized by Docker, Inc. that covers different aspects of Docker, various tooling 
and the ecosystem around Docker.

## Dockercon Keynotes

The main announcement in the keynote (that is relevant to the docker consumers) is that Docker will be adding a plugin 
infrastructure for various critical components in the stack - like networking, storage (data volumes), scheduler, 
service discovery etc. This lets you to swap out any docker component for a third party component. For example, you 
could swap out the docker networking stack with [Weave](http://weave.works/) or use the data volumes provided by 
[Flocker](https://github.com/ClusterHQ/flocker). Docker will also be releasing a separate experimental version of docker 
if you want to be on the bleeding edge of docker (similar to Chrome canary).

Docker is also trying to standardize the definition of container and get the industry converge on a standard. 
So they announced the [open container project](https://www.opencontainers.org/) to define the container spec. 
It will be interesting to see how this will accomodate the [appC](https://github.com/appc) container specification 
driven by [CoreOS](https://coreos.com/). The keynote videos are available online 
[here](https://blog.docker.com/2015/06/dockercon-2015-keynote-videos/).

Below are the write ups from the sessions I attended.

## Why Docker

[Adrian Cockcroft](https://twitter.com/adrianco) is the ex-chief architect of Netflix cloud services who 
pioneered micro services architecture. He explained why Docker is the faster, cheaper and safer way to run services 
in production. Docker makes it easy to set up and run CI flows and release to production very frequently. 
He also mentioned that the engineer who wrote a service is responsible for running it in production. In terms of 
efficiency docker is step up from virtualization. Virtualization consolidates CPU (with over subscribed VMs) and 
Docker consolidates CPU and RAM (each container does not requires the full OS like a VM) and hence saves cost. 
He also pointed tools like [Notary](https://github.com/docker/notary) can be used in the image supply chain for safety. 
His summary/prediction for docker is:

    2014 - DIY frameworks were built for Docker
    2015 - Hardening and best practices are evolving
    2016 - More companies will use docker in production

<iframe src="https://www.youtube.com/embed/zDuTIZBh5_Q" height="315" width="560" allowfullscreen="" frameborder="0"></iframe>

## All registries are local

One useful technique that Grubhub (food delivery service) uses for delivering docker images is to run a docker registry 
locally on each AWS instance. All these registries are then backed by a shared S3 storage. This helps them to avoid 
the bottleneck of a single docker registry. Grubhub also runs automated tests using docker. Post deployment, 
test containers are run in the same environment. Full talk is below.

<iframe src="https://www.youtube.com/embed/yU0QhhS-XzI" height="315" width="560" allowfullscreen="" frameborder="0"></iframe>

## Docker for local development

Lyft uses docker primarily to run and test services locally and in a single box environment. Initially they used vagrants 
to run all of their (~50) services and their laptops could not keep up beyond 3 vagrants. So they used docker to run them 
all in a single box. Each engineer / QA has an separate EC2 instance to deploy specific versions of services (using jenkins). 
Mobile clients can also be pointed to these machines for testing bug fixes. Also EC2 snapshots are used to report/reproduce bugs.

![Docker local development](https://narenst.github.com/assets/docker_dev_env.jpg)

## Autoscaling Docker services

A large number of companies that were exhibiting at the conference are trying to solving the docker orchestration problem. 
One of the leading tools in this space is [Apache Mesos](http://mesos.apache.org/). Mesos converts the datacenter in to a 
single pool of resource. [Marathon](https://mesosphere.github.io/marathon/) is built on top of Mesos to deploy and 
monitor a cluster of docker services. Walt Disney uses Marathon to run their web services. 

An alternative tool for managing a docker cluster and running/scheduling docker containers is Google's 
[kubernetes](http://kubernetes.io/). Also Docker announced a new version of [Swarm](https://docs.docker.com/swarm/) that makes 
a cluster of docker servers in to a single pool. You can run docker commands against a swarm like a single docker server. 
The scheduling logic for these containers is [configurable](https://docs.docker.com/swarm/scheduler/strategy/).

## Docker for fun

One of the fun talks at the conference was given by Jessie Frazelle. It was actually a series of demos where she 
used docker to run a gamut of desktop applications you would normally not think of running in docker - like Chrome, 
Gimp, Skype, Spotify, Tor (requires some network finangling). Some of these are potentially useful for installing apps 
that has a lot of dependencies that you do not want to install on your computer. But some of these are just for fun. 
Full talk is here for inspiration:

<iframe width="560" height="315" src="https://www.youtube.com/embed/1qlLUf7KtAw" frameborder="0" allowfullscreen></iframe>

Another interesting use case for docker was presented by Jeff Lindsay aka Progrium. He showed Envy - a tool for making 
local development environments using docker (similar to virualenv for python). This would be an alternative for 
vagrant but much cheaper. Each environment is a docker container (running its own docker). This is just a prototype but 
was still interesting. You can check out the demo video below (there is no audio but it should be relatively easy 
to follow along):

<iframe src="https://player.vimeo.com/video/131329120" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p><a href="https://vimeo.com/131329120">Envy Prototype</a> from <a href="https://vimeo.com/progrium">Jeff Lindsay</a> on <a href="https://vimeo.com">Vimeo</a>.</p>

Docker blog is adding more videos from the conference [here](https://blog.docker.com/). Overall the conference was a good 
exposure to what the docker ecosystem is trending towards. A large number of companies are starting to use Docker in 
different capacities. They are noticing the gaps in tooling and adopting third party tools or building their own. 
I expect some of these to solidify and become industry standards by Dockercon 2016.
